YUI.add("moodle-availability_examus-form",function(e,t){M.availability_examus=M.availability_examus||{},M.availability_examus.form=e.Object(M.core_availability.plugin),M.availability_examus.form.rules=null,M.availability_examus.form.initInner=function(e){this.rules=e},M.availability_examus.form.instId=0,M.availability_examus.form.getNode=function(t){function f(e){return M.util.get_string(e,"availability_examus")}var n,r,i,s,o,u,a;M.availability_examus.form.instId+=1,s="examus"+M.availability_examus.form.instId,n="<label> "+f("title")+" </label><br>",u=s+"_duration",n+='<label for="'+u+'">'+f("duration")+"</label> ",n+='<input type="text" name="duration" id="'+u+'">',o=s+"_mode",n+='<br><label for="'+o+'">'+f("mode")+"</label> ",n+='<select name="mode" id="'+o+'">',n+='  <option value="normal">'+f("normal_mode")+"</option>",n+='  <option value="identification">'+f("identification_mode")+"</option>",n+='  <option value="olympics">'+f("olympics_mode")+"</option>",n+="</select>";var l=s+"_autoRescheduling";n+='<br><label for="'+l+'">'+f("auto_rescheduling")+"</label> ",n+='<input type="checkbox" name="auto_rescheduling" id="'+l+'" value="1">',n+='<label for="'+l+'">'+f("enable")+"</label> ",n+='<div class="rules">',n+="<label>"+f("rules")+"</label> ";for(var c in this.rules)a=s+"_"+c,n+='  <br><input type="checkbox" name="'+c+'" id="'+a+'" value="'+c+'" >',n+='  <label for="'+a+'">'+f(c)+"</label>";n+="</div>",r=e.Node.create("<span> "+n+" </span>"),t.duration!==undefined&&r.one("input[name=duration]").set("value",t.duration),t.mode!==undefined&&r.one("select[name=mode] option[value="+t.mode+"]").set("selected","selected");if(t.auto_rescheduling!==undefined){var h=t.auto_rescheduling?"checked":null;r.one("#"+l).set("checked",h)}t.rules===undefined&&(t.rules=this.rules);for(c in t.rules)t.rules[c]&&r.one(".rules input[name="+c+"]").set("checked","checked");return M.availability_examus.form.addedEvents||(M.availability_examus.form.addedEvents=!0,i=e.one(".availability-field"),i.delegate("valuechange",function(){M.core_availability.form.update()},".availability_examus input[name=duration]"),i.delegate("valuechange",function(){M.core_availability.form.update()},".availability_examus select[name=mode]"),i.delegate("click",function(){M.core_availability.form.update()},".availability_examus .rules input"),i.delegate("click",function(){M.core_availability.form.update()},".availability_examus input[type=checkbox]")),r},M.availability_examus.form.fillValue=function(t,n){var r,i;t.duration=n.one("input[name=duration]").get("value").trim(),t.mode=n.one("select[name=mode]").get("value").trim(),t.auto_rescheduling=n.one("input[name=auto_rescheduling]").get("checked"),t.rules={},r=n.all(".rules input"),e.each(r,function(e){i=e.get("value"),e.get("checked")===!0?t.rules[i]=!0:t.rules[i]=!1})},M.availability_examus.form.fillErrors=function(e,t){var n={};this.fillValue(n,t),(n.duration===undefined||!(new RegExp("^\\d+$")).test(n.duration)||n.duration%30!==0)&&e.push("availability_examus:error_setduration")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});
